# 手動調整GUI

波形を見ながらセグメントの開始/終了位置を調整できるGUIツールです。

## 起動方法

```bash
# transcript.jsonがあるディレクトリを指定
uv run edit.py input_generated/

# オプション
uv run edit.py input_generated/ --port 8080      # ポート変更
uv run edit.py input_generated/ --no-browser     # ブラウザを開かない
```

ブラウザで http://localhost:5000 が自動で開きます。

## 主な機能

- **波形表示**: Wavesurfer.jsによる波形表示・ズーム・タイムライン
- **セグメント編集**: ドラッグ操作または数値入力で時刻調整（即座に反映）
- **テキスト編集**: 文字起こしテキストの修正（即座に反映）
- **音声再生**: セグメント単位の再生・ループ再生・再生速度変更
- **自動選択**: 再生カーソル位置のセグメントを自動選択
- **差分書き出し**: 変更/追加/削除/リネームを差分ベースで処理
- **全件書き出し**: 強制的に全セグメントを再書き出し

## タイトルアイコン

| アイコン | 状態 |
|---------|------|
| `⚠ 手動調整GUI` | 未書き出しの変更あり |
| `✓ 手動調整GUI` | 書き出し済み |

## キーボードショートカット

| キー | 機能 |
|------|------|
| Space | 再生/停止 |
| L | ループ再生ON/OFF |
| ←/→ | 前/次のセグメント選択 |
| ↑/↓ | 0.1秒移動 |
| ,/. | 5秒移動 |
| >/< | 再生速度変更 |
| +/- | ズームイン/アウト |
| Ctrl+ホイール | ズームイン/アウト |
| Delete | セグメント削除 |
| Ctrl+S | 保存 |
| ? | ヘルプ表示 |

## 波形エディタの操作

| 領域 | 操作 |
|------|------|
| 上部（タイムライン） | クリックでカーソル移動 |
| 下部（セグメント領域） | クリックでセグメント選択、ドラッグで時刻調整 |

## 保存と書き出し

- **保存**: 編集内容を`edit_segments.json`に保存
- **書き出し**: 差分ベースで音声ファイルを生成
- **全件書き出し**: 全セグメントを強制的に再書き出し

書き出し処理の詳細は [export_behavior.md](export_behavior.md) を参照。
